{"version":3,"file":"frontend/room-review.js","mappings":"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","sources":["webpack://wp-hotel-booking/./assets/js/frontend/room-review.js"],"sourcesContent":["(function () {\n    const openFomBtn = document.querySelector('#hb-room-add-new-review');\n    const closeFormBtn = document.querySelector('.close-form-btn');\n\n    const reviewFormPopup = document.querySelector('#hb-room-review-form-popup');\n    let background, reviewForm\n    let imageData = [];\n\n    const init = () => {\n        if (!reviewFormPopup) {\n            return;\n        }\n\n        background = reviewFormPopup.querySelector('.bg-overlay');\n        reviewForm = reviewFormPopup.querySelector('#hb-room-submit-review-form');\n\n        openForm();\n        closeForm();\n        ratingReview();\n        uploadImages();\n        submitReview();\n        sortReview();\n    };\n    jQuery(window).on('elementor/frontend/init', () => {\n        elementorFrontend.hooks.addAction('frontend/element_ready/tours-widget-comment.default', init);\n    });\n\n    const sortReview = () => {\n        const sortByNode = document.querySelector('#hb-room-sort-by');\n\n        if (!sortByNode) {\n            return;\n        }\n\n        document.addEventListener('click', function (event) {\n            const target = event.target;\n            if (target.classList.contains('toggle') && target.closest('.hb-room-commentlist-sort-filter')) {\n                sortByNode.classList.add('is-open')\n            } else if (!target.classList.contains('hb-sort-by-option')) {\n                sortByNode.classList.remove('is-open')\n            }\n        });\n    }\n\n    const openForm = () => {\n        if (!openFomBtn) {\n            return;\n        }\n\n\n        openFomBtn.addEventListener('click', function () {\n            background.classList.add('active');\n            reviewForm.classList.add('active');\n        });\n    }\n\n    const closeForm = () => {\n        closeFormBtn.addEventListener('click', function () {\n            background.classList.remove('active');\n            reviewForm.classList.remove('active');\n        })\n\n        document.addEventListener('click', function (event) {\n            const target = event.target;\n\n            if (target.getAttribute('id') === 'hb-room-add-new-review') {\n                return;\n            }\n\n            const formNode = target.closest('#hb-room-submit-review-form');\n\n            if (!formNode && target.getAttribute('id') !== 'hb-room-submit-review-form') {\n                background.classList.remove('active');\n                reviewForm.classList.remove('active');\n            }\n        });\n    }\n\n    const ratingReview = () => {\n        const reviewRatingNode = reviewForm.querySelector('#hb-room-submit-review-form input[name=\"review-rating\"]');\n\n        if (!reviewRatingNode) {\n            return;\n        }\n\n        const ratingNode = document.querySelector('#hb-room-submit-review-form .rating-star');\n        const ratingStarItems = ratingNode.querySelectorAll('#hb-room-submit-review-form .rating-star-item');\n\n        [...ratingStarItems].map(ratingStarItem => {\n            ratingStarItem.addEventListener('mouseover', function (event) {\n                const actived = this.closest('.rating-star.active');\n                if (actived) {\n                    return;\n                }\n\n                ratingNode.classList.add('selected');\n                ratingStarItem.classList.add('selected');\n            });\n\n            ratingStarItem.addEventListener('mouseleave', function (event) {\n                const actived = this.closest('.rating-star.active');\n                if (actived) {\n                    return;\n                }\n\n                ratingNode.classList.remove('selected');\n                ratingStarItem.classList.remove('selected');\n            });\n\n            ratingStarItem.addEventListener('click', function (event) {\n                event.preventDefault();\n                reviewRatingNode.value = this.getAttribute('data-star-rating');\n\n                const activeRatingStarNode = document.querySelector('#hb-room-submit-review-form .rating-star-item.active');\n\n                if (activeRatingStarNode) {\n                    activeRatingStarNode.classList.remove('active');\n                }\n\n                ratingNode.classList.remove('selected');\n                ratingNode.classList.add('active');\n                ratingStarItem.classList.remove('selected');\n                ratingStarItem.classList.add('active');\n            });\n        });\n    }\n\n    const uploadImages = () => {\n        const galleryReview = document.querySelector('.hb-gallery-review');\n        if (!galleryReview) {\n            return;\n        }\n\n        if (typeof HB_ROOM_REVIEW_GALLERY === 'undefined') {\n            return;\n        }\n\n        const roomId = galleryReview.getAttribute('data-room-id');\n        const uploadImage = galleryReview.querySelector('#hb-room-review-image');\n        const preview = galleryReview.querySelector('.gallery-preview');\n        const reviewNotice = galleryReview.querySelector('.review-notice');\n\n        const maxImages = HB_ROOM_REVIEW_GALLERY.max_images || 0;\n\n        uploadImage.addEventListener('change', function () {\n            removeNotice();\n\n            const count = uploadImage.files.length;\n            let uploadedCount = 0;\n            const allowedTypes = ['image/jpeg', 'image/png', 'image/jpg', 'image/gif'];\n\n            //Validate image number\n            if (count + uploadedCount > maxImages) {\n                handleUploadError();\n                displayNotice(HB_ROOM_REVIEW_GALLERY.max_image_error, 'error');\n                return;\n            }\n\n            for (let i = 0; i < count; i++) {\n                if (!allowedTypes.includes(uploadImage.files[i].type)) {\n                    handleUploadError();\n                    displayNotice(HB_ROOM_REVIEW_GALLERY.file_type_error, 'error');\n                    return;\n                } else if (uploadImage.files[i].size && uploadImage.files[i].size > parseInt(HB_ROOM_REVIEW_GALLERY.max_file_size) * 1024) {\n                    handleUploadError();\n                    displayNotice(HB_ROOM_REVIEW_GALLERY.max_file_size_error, 'error');\n                    return;\n                }\n            }\n\n            let previewItemHtml = '';\n            [...uploadImage.files].map(file => {\n                const previewImage = window.URL.createObjectURL(file);\n                previewItemHtml += `<div class=\"preview-item\"><img src=\"${previewImage}\" alt=\"#preview\"></div>`\n            });\n\n            if (previewItemHtml) {\n                preview.innerHTML = previewItemHtml;\n            }\n\n            imageData = uploadImage.files;\n        });\n\n        const handleUploadError = () => {\n            const notUploadedPreview = galleryReview.querySelectorAll('.cr-upload-images-preview .hb-upload-images-containers:not(.hb-upload-ok)');\n            [...notUploadedPreview].map(el => {\n                el.remove();\n            });\n\n            uploadImage.value = '';\n        }\n\n        const removeNotice = () => {\n            reviewNotice.innerHTML = '';\n        }\n\n        const displayNotice = (message, status = 'success') => {\n            if (status === 'success') {\n                reviewNotice.classList.remove('error');\n                reviewNotice.classList.add('success');\n            } else {\n                reviewNotice.classList.remove('success');\n                reviewNotice.classList.add('error');\n            }\n\n            reviewNotice.innerHTML = message;\n        }\n    }\n\n    const submitReview = () => {\n        const submitBtnNode = reviewFormPopup.querySelector('footer button');\n        submitBtnNode.addEventListener('click', async function () {\n            submitBtnNode.disabled = true;\n            const spinnerNode = reviewFormPopup.querySelector('.hb-room-spinner');\n            spinnerNode.classList.add('active');\n            const noticeNode = reviewFormPopup.querySelector('p.notice');\n            noticeNode.innerHTML = '';\n            const ratingNode = reviewFormPopup.querySelector('input[name=\"review-rating\"]');\n            const contentNode = reviewFormPopup.querySelector('#review-content');\n            const titleNode = reviewFormPopup.querySelector('#review-title');\n\n            let rating = '';\n            if (ratingNode) {\n                rating = ratingNode.value;\n            }\n\n            const content = contentNode.value;\n            const title = titleNode.value;\n\n            const base64Images = await handleBase64();\n\n            for (let i = 0; i < base64Images.length; i++) {\n                base64Images[i].name = imageData[i].name;\n                base64Images[i].type = imageData[i].type;\n            }\n\n            const roomId = reviewForm.getAttribute('data-room-id');\n\n            let data = {\n                \"room_id\": roomId\n            }\n\n            if (rating) {\n                data = {...data, rating};\n            }\n\n            if (title) {\n                data = {...data, title};\n            }\n\n            if (content) {\n                data = {...data, content};\n            }\n\n            if (base64Images) {\n                data = {...data, \"base64_images\": base64Images};\n            }\n\n            wp.apiFetch({\n                path: '/hb-room/v1/update-review', method: 'POST', data,\n            }).then((res) => {\n                if (res.status === 'success') {\n                    noticeNode.classList.remove('failed');\n                    noticeNode.classList.add('success');\n\n                    if (res.msg) {\n                        noticeNode.innerHTML = res.msg;\n                    }\n\n                    if (res.data.redirect_url) {\n                        window.location.href = res.data.redirect_url;\n                        location.reload();\n                        return false;\n                    }\n                } else {\n                    noticeNode.classList.remove('success');\n                    noticeNode.classList.add('failed');\n\n                    if (res.msg) {\n                        noticeNode.innerHTML = res.msg;\n                    }\n                }\n            }).catch((err) => {\n                console.log(err);\n            }).finally(() => {\n                submitBtnNode.disabled = false;\n                spinnerNode.classList.remove('active');\n            });\n        });\n    }\n\n    const toBase64 = (file) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = () => resolve(reader.result);\n            reader.onerror = error => reject(error);\n        });\n    };\n\n    const handleBase64 = async () => {\n        const filePathsPromises = [];\n        [...imageData].map(file => {\n            filePathsPromises.push(toBase64(file));\n        });\n        const filePaths = await Promise.all(filePathsPromises);\n        return filePaths.map((base64File) => ({\"base64\": base64File}));\n    }\n\n    init();\n})();\n"],"names":["openFomBtn","document","querySelector","closeFormBtn","reviewFormPopup","background","reviewForm","imageData","init","openForm","closeForm","ratingReview","uploadImages","submitReview","sortReview","jQuery","window","on","elementorFrontend","hooks","addAction","sortByNode","addEventListener","event","target","classList","contains","closest","add","remove","getAttribute","formNode","reviewRatingNode","ratingNode","ratingStarItems","querySelectorAll","map","ratingStarItem","actived","preventDefault","value","activeRatingStarNode","galleryReview","HB_ROOM_REVIEW_GALLERY","roomId","uploadImage","preview","reviewNotice","maxImages","max_images","removeNotice","count","files","length","uploadedCount","allowedTypes","handleUploadError","displayNotice","max_image_error","i","includes","type","file_type_error","size","parseInt","max_file_size","max_file_size_error","previewItemHtml","file","previewImage","URL","createObjectURL","innerHTML","notUploadedPreview","el","message","status","submitBtnNode","disabled","spinnerNode","noticeNode","contentNode","titleNode","rating","content","title","base64Images","handleBase64","name","data","wp","apiFetch","path","method","then","res","msg","redirect_url","location","href","reload","catch","err","console","log","finally","toBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","filePathsPromises","push","filePaths","all","base64File"],"sourceRoot":""}