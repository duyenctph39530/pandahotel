{"version":3,"file":"stripe-api.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA,wIAAwI;AACxI;AACA;;AAEA,kBAAkB,oBAAoB;AACtC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;;AAEA;AACA;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG,GAAG;;AAEN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;;AAGA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA,sEAAsE,aAAa;AACnF;AACA;;AAEA;AACA,8BAA8B;;AAE9B;AACA;AACA,GAAG;AACH;;AAEsB;;;;;;;UC1KtB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AAC+C;AAE/C,MAAMC,UAAU,GAAG,CAAE,MAAM;EAC1B,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","sources":["webpack://wp-hotel-booking-stripe/./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack://wp-hotel-booking-stripe/webpack/bootstrap","webpack://wp-hotel-booking-stripe/webpack/runtime/define property getters","webpack://wp-hotel-booking-stripe/webpack/runtime/hasOwnProperty shorthand","webpack://wp-hotel-booking-stripe/webpack/runtime/make namespace object","webpack://wp-hotel-booking-stripe/./assets/js/stripe-api.js"],"sourcesContent":["var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"2.3.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function () {\n    reject(new Error('Failed to load Stripe.js'));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise[\"catch\"](function (error) {\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise$1;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise$1) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n  return stripePromise$1;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Stripe js handle payment with form mount from Lib Stripe JS\n *\n * @since 1.7.8\n * @version 1.0.0\n */\nimport { loadStripe } from '@stripe/stripe-js';\n\nconst wphbStripe = ( () => {\n\tlet Stripe;\n\tlet elCheckoutForm;\n\tlet elStripeForm, elPageCheckout;\n\tconst idStripeForm = 'wphb-stripe-iframe-wrap';\n\t// const idBtnPlaceHolder = 'learn-press-checkout-place-order';\n\tconst idPageCheckout = 'hotel-booking-payment';\n\tlet urlHandle;\n\tlet mountStripeDone = false;\n\tlet errorMessage;\n\n\tconst fetchAPI = ( args, callBack = {} ) => {\n\t\tfetch( urlHandle, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: args,\n\t\t} )\n\t\t\t.then( ( res ) => res.text() )\n\t\t\t.then( ( data ) => {\n\t\t\t\tconsole.log( data );\n\t\t\t\tdata = parseJson( data );\n\t\t\t\tcallBack.success( data );\n\t\t\t} )\n\t\t\t.finally( () => {\n\t\t\t\tcallBack.completed();\n\t\t\t} )\n\t\t\t.catch( ( err ) => callBack.error( err ) );\n\t};\n\n\tconst parseJson = ( data ) => {\n\t\tif ( typeof data !== 'string' ) {\n\t\t\treturn data;\n\t\t}\n\t\tconst m = String.raw( { raw: data } ).match( /<!-- HB_AJAX_START -->(.*)<!-- HB_AJAX_END -->/s );\n\t\ttry {\n\t\t\tif ( m ) {\n\t\t\t\tdata = JSON.parse( m[ 1 ].replace( /(?:\\r\\n|\\r|\\n)/g, '' ) );\n\t\t\t} else {\n\t\t\t\tdata = JSON.parse( data );\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tdata = {};\n\t\t}\n\t\treturn data;\n\t}\n\n\t/**\n\t * Load Stripe JS via publish key\n\t * then mount form Stripe\n\t *\n\t * @return {Promise<void>}\n\t */\n\tconst mountFormStripe = async () => {\n\t\ttry {\n\t\t\tStripe = await loadStripe( hotel_booking_stripe_params.publish_key || '' );\n\n\t\t\t// Display form Stripe\n\t\t\tconst options = {\n\t\t\t\tclientSecret: hotel_booking_stripe_params.publishableKey || '',\n\t\t\t\tappearance: {},\n\t\t\t};\n\t\t\telStripeForm = Stripe.elements( options );\n\n\t\t\t// Create and mount the Payment Element\n\t\t\tconst paymentElement = elStripeForm.create( 'payment' );\n\t\t\tpaymentElement.on( 'loaderror', function( event ) {\n\t\t\t\terrorMessage = event.error.message;\n\t\t\t} );\n\t\t\tpaymentElement.on( 'ready', function( event ) {\n\t\t\t\tmountStripeDone = true;\n\t\t\t} );\n\t\t\tpaymentElement.mount( `#${ idStripeForm }` );\n\t\t} catch ( error ) {\n\t\t\terrorMessage = error.message;\n\t\t}\n\t};\n\n\t/**\n\t * Confirm the PaymentIntent with url has parameter \"payment_intent\"\n\t *\n\t * https://stripe.com/docs/js/payment_intents/confirm_payment\n\t *\n\t * @param  return_url\n\t * @param  callBack\n\t */\n\tconst confirmStripePayment = ( return_url, callBack ) => {\n\t\tif ( typeof Stripe === 'undefined' ) {\n\t\t\tconsole.log( 'Stripe is not defined' );\n\t\t}\n\t\tif ( typeof elStripeForm === 'undefined' ) {\n\t\t\tconsole.log( 'Stripe form not mounted' );\n\t\t}\n\n\t\tStripe.confirmPayment( {\n\t\t\telements: elStripeForm,\n\t\t\tconfirmParams: {\n\t\t\t\treturn_url,\n\t\t\t},\n\t\t} ).then( function( result ) {\n\t\t\tcallBack( result );\n\t\t} );\n\t};\n\tconst setMessageError = ( mess_text ) => {\n\t\tconst elMessage = `<div class=\"hb-message message\">${ mess_text }</div>`;\n\t\telPageCheckout.insertAdjacentHTML( 'afterbegin', elMessage );\n\t\telPageCheckout.scrollIntoView( {\n\t\t\tbehavior: 'smooth',\n\t\t} );\n\t};\n\n\treturn {\n\t\tinit: async () => {\n\t\t\tif ( 'undefined' === typeof hotel_booking_stripe_params ) {\n\t\t\t\tconsole.log( 'Stripe Setting is not defined' );\n\t\t\t}\n\n\t\t\tif ( 'undefined' === typeof hotel_booking_stripe_params.payment_stripe_via_iframe ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telPageCheckout = document.getElementById( idPageCheckout );\n\t\t\telCheckoutForm = document.getElementById( 'hb-payment-form' );\n\t\t\tif ( ! elCheckoutForm ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait mountFormStripe();\n\t\t},\n\t\tevents: () => {\n\t\t\telCheckoutForm = document.getElementById( 'hb-payment-form' );\n\t\t\tif ( ! elCheckoutForm ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telCheckoutForm.addEventListener( 'click', function( e ) {\n\t\t\t\tconst target = e.target;\n\n\t\t\t\tif ( target.classList.contains( 'hb_button' ) && target.type == 'submit' ) {\n\t\t\t\t\tconst elBtnPlaceHolder = target;\n\t\t\t\t\tconst formData = new FormData( elCheckoutForm );\n\t\t\t\t\tif ( formData.get( 'hb-payment-method' ) !== 'stripe' ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif ( ! elPageCheckout ) {\n\t\t\t\t\t\tconsole.error( 'Page checkout is not defined' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst elMes = elPageCheckout.querySelectorAll( '.hb-message.message' );\n\t\t\t\t\tif ( elMes.length > 0 ) {\n\t\t\t\t\t\telMes.forEach( ( el ) => {\n\t\t\t\t\t\t\tel.remove();\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( 'undefined' !== typeof errorMessage ) {\n\t\t\t\t\t\tsetMessageError( errorMessage );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( 'undefined' === typeof hotel_booking_stripe_params.publishableKey ) {\n\t\t\t\t\t\tsetMessageError( 'Stripe Publish Key is generate failed, please check again config key!' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! mountStripeDone ) {\n\t\t\t\t\t\tsetMessageError( 'Stripe payment not load done. Please wait!' );\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\telBtnPlaceHolder.classList.add( 'wphb_loading' );\n\t\t\t\t\telBtnPlaceHolder.innerText = hotel_booking_stripe_params.button_processing;\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Submit form Stripe to check valid fields\n\t\t\t\t\t * https://stripe.com/docs/js/elements/submit\n\t\t\t\t\t *\n\t\t\t\t\t * When check all fields is valid, will submit checkout to create order,\n\t\t\t\t\t * then pass url lp order to confirmStripePayment() to call Stripe API,\n\t\t\t\t\t * Stripe API will return url redirect has parameter \"payment_intent\",\n\t\t\t\t\t * server will catch it and check if payment_intent is valid, LP Order will set to Complete\n\t\t\t\t\t */\n\t\t\t\t\telStripeForm.submit()\n\t\t\t\t\t\t.then( function( result ) {\n\t\t\t\t\t\t\tif ( 'undefined' !== typeof result.error ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// elBtnPlaceHolder.classList.add( 'loading' );\n\t\t\t\t\t\t\telBtnPlaceHolder.disabled = true;\n\t\t\t\t\t\t\t// elBtnPlaceHolder.innerText = lpCheckoutSettings.i18n_processing;\n\n\t\t\t\t\t\t\turlHandle = new URL( hotel_settings.ajax );\n\n\t\t\t\t\t\t\tfetchAPI( formData, {\n\t\t\t\t\t\t\t\tbefore: () => {},\n\t\t\t\t\t\t\t\tsuccess: ( res ) => {\n\t\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\t\tif ( 'fail' === res.result ) {\n\t\t\t\t\t\t\t\t\t\t// elBtnPlaceHolder.classList.remove( 'loading' );\n\t\t\t\t\t\t\t\t\t\telBtnPlaceHolder.disabled = false;\n\t\t\t\t\t\t\t\t\t\t// elBtnPlaceHolder.innerText = lpCheckoutSettings.i18n_place_order;\n\t\t\t\t\t\t\t\t\t\tsetMessageError( res.message );\n\t\t\t\t\t\t\t\t\t} else if ( 'success' === res.result ) {\n\t\t\t\t\t\t\t\t\t\t// elBtnPlaceHolder.innerText = lpCheckoutSettings.i18n_redirecting;\n\t\t\t\t\t\t\t\t\t\tconfirmStripePayment( res.redirect, ( result ) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log( result );\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\terror: ( error ) => {},\n\t\t\t\t\t\t\t\tcompleted: () => {},\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t};\n} )();\n\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\twphbStripe.init().then( () => {} );\n} );\n\nwphbStripe.events();\n"],"names":["loadStripe","wphbStripe","Stripe","elCheckoutForm","elStripeForm","elPageCheckout","idStripeForm","idPageCheckout","urlHandle","mountStripeDone","errorMessage","fetchAPI","args","callBack","fetch","method","body","then","res","text","data","console","log","parseJson","success","finally","completed","catch","err","error","m","String","raw","match","JSON","parse","replace","e","mountFormStripe","hotel_booking_stripe_params","publish_key","options","clientSecret","publishableKey","appearance","elements","paymentElement","create","on","event","message","mount","confirmStripePayment","return_url","confirmPayment","confirmParams","result","setMessageError","mess_text","elMessage","insertAdjacentHTML","scrollIntoView","behavior","init","payment_stripe_via_iframe","document","getElementById","events","addEventListener","target","classList","contains","type","elBtnPlaceHolder","formData","FormData","get","preventDefault","elMes","querySelectorAll","length","forEach","el","remove","add","innerText","button_processing","submit","disabled","URL","hotel_settings","ajax","before","redirect"],"sourceRoot":""}